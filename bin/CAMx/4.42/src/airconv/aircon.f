      SUBROUTINE AIRCON (IOUT,IDONE)
C
C      PROGRAM READS THE ASCII AIR QUALITY FILE THAT WAS SENT TO SAI
C      AND REFORMATS THIS FILE TO MAKE A BINARY FILE THAT MAY BE USED
C      TO RUN THE MODEL
C
      INCLUDE 'nampar.cmd'
      COMMON/LCM/ EMOB(MXX,MXY,MXSPC)
C
C   READ AND WRITE OUT FILE HEADER INFORMATION
C
      IDONE=1
      READ(7,2100)IFILE, NOTE,NSEG, NSPECS, IDATE, BEGTIM, JDATE, ENDTIM
      WRITE(9)IFILE,NOTE,NSEG,NSPECS,IDATE,BEGTIM,JDATE,ENDTIM
      WRITE (IOUT,1005) IDATE, BEGTIM, JDATE, ENDTIM
      READ(7,2001) ORGX, ORGY, IZONE, UTMX, UTMY, DELTAX, DELTAY,
     $          NX, NY, NZ, NZLOWR, NZUPPR, HTSUR, HTLOW, HTUPP
      WRITE (9)      ORGX,ORGY,IZONE,UTMX,UTMY,DELTAX,DELTAY,NX,NY,
     $ NZ,NZLOWR,NZUPPR,HTSUR,HTLOW,HTUPP
      WRITE (IOUT,2001) ORGX,ORGY,IZONE,UTMX,UTMY,DELTAX,DELTAY,NX,NY,
     $ NZ,NZLOWR,NZUPPR,HTSUR,HTLOW,HTUPP
      READ  (7,1002) IX, IY, NXCLL, NYCLL
      WRITE (9)       IX,IY,NXCLL,NYCLL
      IF (NSPECS.LE.0) GO TO 10
      READ(7,1003) ((MSPEC(M,L),M=1,10),L=1,NSPECS)
   10 IBHR=BEGTIM + 1
      IEHR=ENDTIM
      WRITE (9)      ((MSPEC(I,J),I=1,10),J=1,NSPECS)
C*
C
C    LARGE LOOP FOR 24 HOURS OF AIR QUALITY MEASURMENTS
C
      DO 1000 IH = 1,9999
          READ  (7,1005,END=999) IBGDAT,BEGTIM,IENDAT,ENDTIM
          WRITE (9)      IBGDAT, BEGTIM, IENDAT, ENDTIM
          WRITE(IOUT,1005) IBGDAT,BEGTIM,IENDAT,ENDTIM
C
C    LOOP ON INDIVIDUAL SPECIES -  READ AND WRITE OUT IN ASCII
C
          IF (NSPECS.LE.0) GO TO 1000
          DO 400 L = 1,NSPECS
          WRITE (IOUT,1002) L
             DO 350 K=1,NZ
                READ(7,1006)ISEG, (MSPEC(M,L),M = 1,10)
                READ(7,1007) ((EMOB(I,J,L),
     $             I=1,NX),J=1,NY)
                WRITE (9) ISEG, (MSPEC(M,L),M=1,10),
     $            ((EMOB(I,J,L),I=1,NX),J=1,NY)
  350        CONTINUE
  400     CONTINUE
 1000 CONTINUE
  999 RETURN
 1002 FORMAT(4I5)
 1003  FORMAT(10A1)
 1005 FORMAT(5X,2(I10,F10.2))
 1006 FORMAT(I4,10A1)
 1007 FORMAT(9E14.7)
 2001 FORMAT(2(F16.5,1X),I3,1X,4(F16.5,1X),5I4,3F7.0)
 2100 FORMAT(10A1,60A1,/,I2,1X,I3,1X,I6,F6.0,I6,F6.0)
      END
