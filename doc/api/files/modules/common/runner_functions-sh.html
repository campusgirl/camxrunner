<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>/afs/psi.ch/user/o/oderbolz/CAMxRunner/modules/common/runner_functions.sh - CAMxRunner</title><link rel="stylesheet" type="text/css" href="../../../styles/main.css"><script language=JavaScript src="../../../javascript/main.js"></script><script language=JavaScript src="../../../javascript/prettify.js"></script><script language=JavaScript src="../../../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad();prettyPrint();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.51 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CFile"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="runner_functions.sh"></a>runner_functions.sh</h1><div class=CBody><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#runner_functions.sh" >runner_functions.sh</a></td><td class=SDescription></td></tr><tr class="SGroup"><td class=SEntry><a href="#Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.getX" >common.<wbr>runner.getX</a></td><td class=SDescription>Returns the x dimension of a given calculation grid (in grid cells of this grid) Hides the fact that the configuration is different for master and non-master grids. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#common.runner.getY" >common.<wbr>runner.getY</a></td><td class=SDescription>Returns the y dimension  of a given calculation grid (in grid cells of this grid) Hides the fact that the configuration is different for master and non-master grids Note that for nested domains, the 2 buffer cells are added.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.getZ" >common.<wbr>runner.getZ</a></td><td class=SDescription>Returns the z dimension  of a given grid (in grid cells of this grid).</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#common.runner.getMaxX" >common.<wbr>runner.<wbr>getMaxX</a></td><td class=SDescription>Returns the maximum x dimension of all grids Useful for compiling CAMx</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.getMaxY" >common.<wbr>runner.<wbr>getMaxY</a></td><td class=SDescription>Returns the maximum y dimension of all grids Useful for compiling CAMx</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#common.runner.getMaxZ" >common.<wbr>runner.<wbr>getMaxZ</a></td><td class=SDescription>Returns the maximum z dimension of all grids Useful for compiling CAMx</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.countAllCells3D" >common.<wbr>runner.<wbr>countAllCells3D</a></td><td class=SDescription>Returns the sum of the number of cells in all grids (3D) Used by <a href="check_functions-sh.html#common.check.PredictModelOutputMb" class=LFunction id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">common.check.PredictModelOutputMb</a></td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#common.runner.countAllCells2D" >common.<wbr>runner.<wbr>countAllCells2D</a></td><td class=SDescription>Returns the sum of the number of cells in all grids (Just lowest layer) Used by <a href="check_functions-sh.html#common.check.PredictModelOutputMb" class=LFunction id=link2 onMouseOver="ShowTip(event, 'tt1', 'link2')" onMouseOut="HideTip('tt1')">common.check.PredictModelOutputMb</a></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.reportDimensions" >common.<wbr>runner.<wbr>reportDimensions</a></td><td class=SDescription>Prints the dimensions and locations of all the defined grids.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#common.runner.printSummary" >common.<wbr>runner.<wbr>printSummary</a></td><td class=SDescription>Lists any relevant data on this run.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.evaluateRule" >common.<wbr>runner.<wbr>evaluateRule</a></td><td class=SDescription>Evaluates a filerule and returns its expansion. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#common.runner.evaluateRuleAtDayOffset" >common.<wbr>runner.<wbr>evaluateRuleAtDayOffset</a></td><td class=SDescription>Evaluates a filerule for a given simulation day offset (0..NUMBER_OF_SIM_DAYS-1). </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.createDummyFile" >common.<wbr>runner.<wbr>createDummyFile</a></td><td class=SDescription>Creates a dummy file, shows a message and adds the file to the dummy file list. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#common.runner.createTempFile" >common.<wbr>runner.<wbr>createTempFile</a></td><td class=SDescription>Returns the name of a temporary file with random name, shows a message and adds the file to the temp file list if this is needed. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.createTempDir" >common.<wbr>runner.<wbr>createTempDir</a></td><td class=SDescription>Returns the name of a temporary directory with random name, shows a message and adds the file to the temp file list if this is needed.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#common.runner.createJobFile" >common.<wbr>runner.<wbr>createJobFile</a></td><td class=SDescription>A special variety of <a href="#common.runner.createTempFile" class=LFunction id=link3 onMouseOver="ShowTip(event, 'tt2', 'link3')" onMouseOut="HideTip('tt2')">common.runner.createTempFile</a> that sould be used whenever a jobfile for an application (such as AHOMAP) is needed. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.removeTempFiles" >common.<wbr>runner.<wbr>removeTempFiles</a></td><td class=SDescription>Removes all files from the temp file list if CXR_REMOVE_TEMP_FILES is true. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#common.runner.getLockLinkName" >common.<wbr>runner.<wbr>getLockLinkName</a></td><td class=SDescription>Returns the name of a lock-link to use, depending on the lock level (directory)</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.waitForLock" >common.<wbr>runner.<wbr>waitForLock</a></td><td class=SDescription>Waits until a lock is free. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#common.runner.getLock" >common.<wbr>runner.<wbr>getLock</a></td><td class=SDescription>Tries to get a lock, if we must wait longer than $CXR_LOCK_TIMEOUT_SEC, we die. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.releaseLock" >common.<wbr>runner.<wbr>releaseLock</a></td><td class=SDescription>Releases a lock by deleting both link and target file.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#common.runner.getExistingConfigFile" >common.<wbr>runner.<wbr>getExistingConfigFile</a></td><td class=SDescription>Interactively asks user for the name of an existing config file (no path)</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.createConfigFile" >common.<wbr>runner.<wbr>createConfigFile</a></td><td class=SDescription>Interactively creates a new configuration file for a run.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#common.runner.expandConfigFile" >common.<wbr>runner.<wbr>expandConfigFile</a></td><td class=SDescription>Replaces and non-single quoted variable in a config file by its value. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.getModelId" >common.<wbr>runner.<wbr>getModelId</a></td><td class=SDescription>Each model has a 0-based id (used for example to index CXR_SUPPORTED_MODEL_VERSIONS)</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#common.runner.getNewRunName" >common.<wbr>runner.<wbr>getNewRunName</a></td><td class=SDescription>Interactively asks user for new run name</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.createNewRun" >common.<wbr>runner.<wbr>createNewRun</a></td><td class=SDescription>Creates a new run by creating an appropriate link and calling <a href="#common.runner.createConfigFile" class=LFunction id=link4 onMouseOver="ShowTip(event, 'tt3', 'link4')" onMouseOut="HideTip('tt3')">common.runner.createConfigFile</a></td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#common.runner.createMissingDirs" >common.<wbr>runner.<wbr>createMissingDirs</a></td><td class=SDescription>Interactive function if called as such</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.getConfigItem" >common.<wbr>runner.<wbr>getConfigItem</a></td><td class=SDescription>This function loads a runs configuration (full hierarchy) and then extracts the value of a given variable. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#common.runner.recreateInput" >common.<wbr>runner.<wbr>recreateInput</a></td><td class=SDescription>Interactive function</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#common.runner.recreateRun" >common.<wbr>runner.<wbr>recreateRun</a></td><td class=SDescription>Creates a copy of an existing config file and prepares everything to rerun. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#test_module" >test_module</a></td><td class=SDescription>Runs the predefined tests for this module. </td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Functions"></a>Functions</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.getX"></a>common.<wbr>runner.getX</h3><div class=CBody><p>Returns the x dimension of a given calculation grid (in grid cells of this grid) Hides the fact that the configuration is different for master and non-master grids.&nbsp; Note that for nested domains, the 2 buffer cells are added.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>A integer denoting the domain for which we need the dim (in the range 1..CXR_NUMBER_OF_GRIDS)</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.getY"></a>common.<wbr>runner.getY</h3><div class=CBody><p>Returns the y dimension  of a given calculation grid (in grid cells of this grid) Hides the fact that the configuration is different for master and non-master grids Note that for nested domains, the 2 buffer cells are added.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>A integer denoting the domain for which we need the dim (in the range 1..CXR_NUMBER_OF_GRIDS)</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.getZ"></a>common.<wbr>runner.getZ</h3><div class=CBody><p>Returns the z dimension  of a given grid (in grid cells of this grid).</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>A integer denoting the domain for which we need the dim (in the range 1..CXR_NUMBER_OF_GRIDS)</td></tr><tr><td class=CDLEntry>[$2]</td><td class=CDLDescription>true_output_dimension, if true (default false), you get the number of layer of the output (depends on</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.getMaxX"></a>common.<wbr>runner.<wbr>getMaxX</h3><div class=CBody><p>Returns the maximum x dimension of all grids Useful for compiling CAMx</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.getMaxY"></a>common.<wbr>runner.<wbr>getMaxY</h3><div class=CBody><p>Returns the maximum y dimension of all grids Useful for compiling CAMx</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.getMaxZ"></a>common.<wbr>runner.<wbr>getMaxZ</h3><div class=CBody><p>Returns the maximum z dimension of all grids Useful for compiling CAMx</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.countAllCells3D"></a>common.<wbr>runner.<wbr>countAllCells3D</h3><div class=CBody><p>Returns the sum of the number of cells in all grids (3D) Used by <a href="check_functions-sh.html#common.check.PredictModelOutputMb" class=LFunction id=link5 onMouseOver="ShowTip(event, 'tt1', 'link5')" onMouseOut="HideTip('tt1')">common.check.PredictModelOutputMb</a></p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.countAllCells2D"></a>common.<wbr>runner.<wbr>countAllCells2D</h3><div class=CBody><p>Returns the sum of the number of cells in all grids (Just lowest layer) Used by <a href="check_functions-sh.html#common.check.PredictModelOutputMb" class=LFunction id=link6 onMouseOver="ShowTip(event, 'tt1', 'link6')" onMouseOut="HideTip('tt1')">common.check.PredictModelOutputMb</a></p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.reportDimensions"></a>common.<wbr>runner.<wbr>reportDimensions</h3><div class=CBody><p>Prints the dimensions and locations of all the defined grids.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.printSummary"></a>common.<wbr>runner.<wbr>printSummary</h3><div class=CBody><p>Lists any relevant data on this run.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.evaluateRule"></a>common.<wbr>runner.<wbr>evaluateRule</h3><div class=CBody><p>Evaluates a filerule and returns its expansion.&nbsp; This function is needed because we want to expand a rule in a controlled way, so that we can for example transparently decompress files or detect if a rule does not expand properly.</p><p>Note that the expansion of a rule depends on the environment (e. g. the value of date variables or other global variables).&nbsp; This makes it hard to cache the output of this function.</p><p>Side effects: if the it is a _FILE_RULE and the file is compressed and we cannot decompress in place, the returned file name will change.&nbsp; If you want the &ldquo;expected&rdquo; file name, set the parameter try_decompression to false.&nbsp; ABSOLUTELY do this for any OUTPUT_FILE because if the output would have been compressed, CAMxRunner would decompress it, wich makes no sense.&nbsp; If a filename changes due to decompression, the variable _name_changed is true after execution.</p><p>The evaluator tests if the resulting dirname exists (_FILE_RULE only).&nbsp; This is needed if your rules contain things like /some/path/${VAR}/... because we have no way of knowing this name in the check functions.&nbsp; Also, we check if such a rule results in a link.</p><p>To be on the safe side, quote the call (double quotes!)</p><h4 class=CHeading>Examples</h4><p>This code does not if the rule expands to the empty string:</p><blockquote><pre>MY_DIR=&quot;$(common.runner.evaluateRule &quot;$RULE&quot; false &quot;$rule_name&quot;)&quot;
These  ^                                                ^
Ensure that the code does not fail if the string returned contains
spaces.</pre></blockquote><h4 class=CHeading>This code accepts an empty string</h4><blockquote><pre>MY_DIR=&quot;$(common.runner.evaluateRule &quot;$RULE&quot; true &quot;$rule_name&quot;)&quot;</pre></blockquote><h4 class=CHeading>This code is also valid and will not fail on empty expansion</h4><blockquote><pre>MY_DIR=&quot;$(common.runner.evaluateRule &quot;$RULE&quot;)&quot;</pre></blockquote><p>You can use it to generate any string that is made up by variables, but make sure that control sequences like \n are double-escaped (\\n) because the expansion otherwise removes the sequence:</p><blockquote><pre>CXR_FINISH_MESSAGE_RULE='Please copy this into https://wiki.intranet.psi.ch/twiki/LAC/CAMxRuns \\n \| $(date +&quot;%Y/%M/%D&quot;) \| ${USER} \| ${CXR_STATUS} \| ${CXR_RUN} \| ${CXR_START_DATE} \| ${CXR_STOP_DATE} \| http://people.web.psi.ch/oderbolz/CAMx/conf/$(basename $CXR_CONFIG) \| http://people.web.psi.ch/oderbolz/CAMx/log/$(basename $CXR_LOG) \| \\n'</pre></blockquote><p>...</p><blockquote><pre>main.log  &quot;$(common.runner.evaluateRule &quot;$CXR_FINISH_MESSAGE_RULE&quot; true CXR_FINISH_MESSAGE_RULE)&quot;</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>The rule to be evaluated (a string, not a variable)</td></tr><tr><td class=CDLEntry>[$2]</td><td class=CDLDescription>allow_empty if false, a rule must expand to a non-empty string</td></tr><tr><td class=CDLEntry>[$3]</td><td class=CDLDescription>optional name of the rule</td></tr><tr><td class=CDLEntry>[$4]</td><td class=CDLDescription>try_decompression if false (default true), will not attempt compression (and consequenital renaming)</td></tr><tr><td class=CDLEntry>[$5]</td><td class=CDLDescription>create_missing_dirs , if false (default true) minnig directories ore not created</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.evaluateRuleAtDayOffset"></a>common.<wbr>runner.<wbr>evaluateRuleAtDayOffset</h3><div class=CBody><p>Evaluates a filerule for a given simulation day offset (0..NUMBER_OF_SIM_DAYS-1).&nbsp; This is especially useful to determine how certain things where at the first day of a simulation (e. g. a filename).&nbsp; The function needs to re-evaluate the date variables, but takes care to reset them properly.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>The rule to be evaluated (a string, not a variable)</td></tr><tr><td class=CDLEntry>$2</td><td class=CDLDescription>The offset of the simulation day (0..NUMBER_OF_SIM_DAYS-1)</td></tr><tr><td class=CDLEntry>[$3]</td><td class=CDLDescription>allow_empty if false, a rule must expand to a non-empty string</td></tr><tr><td class=CDLEntry>[$4]</td><td class=CDLDescription>optional name of the rule</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.createDummyFile"></a>common.<wbr>runner.<wbr>createDummyFile</h3><div class=CBody><p>Creates a dummy file, shows a message and adds the file to the dummy file list.&nbsp; The size can be chosen if</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>Filename</td></tr><tr><td class=CDLEntry>[$2]</td><td class=CDLDescription>size in MB (Default 1)</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.createTempFile"></a>common.<wbr>runner.<wbr>createTempFile</h3><div class=CBody><p>Returns the name of a temporary file with random name, shows a message and adds the file to the temp file list if this is needed.&nbsp; Note that we cannot use a hash to store tempfiles since otherwise a deadlock would occur.</p><p>If your tempfile is used to call an executable like AHOMAP, use the wrapper <a href="#common.runner.createJobFile" class=LFunction id=link7 onMouseOver="ShowTip(event, 'tt4', 'link7')" onMouseOut="HideTip('tt4')">common.runner.createJobFile</a></p><p>Replaces calls to mktemp and removes the need to remove the temp files, this is done by <a href="#common.runner.removeTempFiles" class=LFunction id=link8 onMouseOver="ShowTip(event, 'tt5', 'link8')" onMouseOut="HideTip('tt5')">common.runner.removeTempFiles</a></p><h4 class=CHeading>Recommended call</h4><blockquote><pre>TMPFILE=$(common.runner.createTempFile $FUNCNAME)</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>-d</td><td class=CDLDescription>create a directory.&nbsp; <a href="#common.runner.createTempDir" class=LFunction id=link9 onMouseOver="ShowTip(event, 'tt6', 'link9')" onMouseOut="HideTip('tt6')">common.runner.createTempDir</a> is a wrapper for this feature.</td></tr><tr><td class=CDLEntry>[$1]</td><td class=CDLDescription>identifier of tempfile, recommended to use $FUNCNAME</td></tr><tr><td class=CDLEntry>[$2]</td><td class=CDLDescription>store, if false, we do not add the file to list.&nbsp; This is useful if we keep track of the files ourselves (e. g. when decompressing files)</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.createTempDir"></a>common.<wbr>runner.<wbr>createTempDir</h3><div class=CBody><p>Returns the name of a temporary directory with random name, shows a message and adds the file to the temp file list if this is needed.</p><p>Note that if a tempdir is removed, we remove it recursively (including all files and directories therein).</p><h4 class=CHeading>Recommended call</h4><blockquote><pre>TMPDIR=$(common.runner.createTempDir $FUNCNAME)</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>[$1]</td><td class=CDLDescription>identifier of tempfile, recommended to use $FUNCNAME</td></tr><tr><td class=CDLEntry>[$2]</td><td class=CDLDescription>store, if false, we do not add the file to list.&nbsp; This is useful if we keep track of the files ourselves (e. g. when decompressing files)</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.createJobFile"></a>common.<wbr>runner.<wbr>createJobFile</h3><div class=CBody><p>A special variety of <a href="#common.runner.createTempFile" class=LFunction id=link10 onMouseOver="ShowTip(event, 'tt2', 'link10')" onMouseOut="HideTip('tt2')">common.runner.createTempFile</a> that sould be used whenever a jobfile for an application (such as AHOMAP) is needed.&nbsp; These tempfiles are stored in $CXR_JOBFILE_DIR.&nbsp; These are not put into the templist, becase we want to keep them.</p><h4 class=CHeading>Recommended call</h4><blockquote><pre>exec_temp_file=$(common.runner.createJobFile AHOMAP)</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>[$1]</td><td class=CDLDescription>identifier of tempfile, use name of target executable if possible</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.removeTempFiles"></a>common.<wbr>runner.<wbr>removeTempFiles</h3><div class=CBody><p>Removes all files from the temp file list if CXR_REMOVE_TEMP_FILES is true.&nbsp; Also recompresses or removes decompressed files if requested/needed.&nbsp; If Links where relocated this is also fixed here.&nbsp; Note that if a tempdir is removed, we remove it recursively (including all files and directories therein).</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.getLockLinkName"></a>common.<wbr>runner.<wbr>getLockLinkName</h3><div class=CBody><p>Returns the name of a lock-link to use, depending on the lock level (directory)</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>the name of the lock to get</td></tr><tr><td class=CDLEntry>$2</td><td class=CDLDescription>the level of the lock, either of &ldquo;$CXR_LEVEL_INSTANCE&rdquo;, &ldquo;$CXR_LEVEL_GLOBAL&rdquo; or &ldquo;$CXR_LEVEL_UNIVERSAL&rdquo;</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.waitForLock"></a>common.<wbr>runner.<wbr>waitForLock</h3><div class=CBody><p>Waits until a lock is free.&nbsp; When the lock is not free, we wait up to $3 or CXR_LOCK_TIMEOUT_SEC seconds, then return false in _retval</p><h4 class=CHeading>Example</h4><blockquote><pre>common.runner.waitForLock NextTask &quot;$CXR_LEVEL_GLOBAL&quot;
if [[ $_retval == false ]]
then
    main.dieGracefully &quot;Waiting for NextTask lock took too long&quot;
fi</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>the name of the lock to get</td></tr><tr><td class=CDLEntry>$2</td><td class=CDLDescription>the level of the lock, either of &ldquo;$CXR_LEVEL_INSTANCE&rdquo;, &ldquo;$CXR_LEVEL_GLOBAL&rdquo; or &ldquo;$CXR_LEVEL_UNIVERSAL&rdquo;</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.getLock"></a>common.<wbr>runner.<wbr>getLock</h3><div class=CBody><p>Tries to get a lock, if we must wait longer than $CXR_LOCK_TIMEOUT_SEC, we die.&nbsp; Locks can have three levels (similar to hashes) If we get the lock, a link in the appropiate directory is created and the path to the file is stored in the Tempfile list.&nbsp; (Thanks to Stefan Tramm for the symlink idea)</p><p>Locking in general is harder than one thinks.&nbsp; We use an operation that generally is atomic on most filesystems (check yours!): symlink.&nbsp; I experimented a bit with Lamports Bakery algoritm, but its not trivial to implement in bash.&nbsp; Refer to <a href="http://stackoverflow.com/questions/218451/locking-nfs-files-in-php" class=LURL target=_top>http://stackoverflow.com<wbr>/questions<wbr>/218451<wbr>/locking-nfs-files-in-php</a> or <a href="http://mywiki.wooledge.org/BashFAQ/045" class=LURL target=_top>http://mywiki.wooledge.org/BashFAQ/045</a> or <a href="http://stackoverflow.com/questions/185451/quick-and-dirty-way-to-ensure-only-one-instance-of-a-shell-script-is-running-at-a" class=LURL target=_top>http://stackoverflow.com<wbr>/questions<wbr>/185451<wbr>/quick-and-dirty-way-to-ensure-only-one-instance-of-a-shell-script-is-running-at-a</a> for details.</p><h4 class=CHeading>Example</h4><blockquote><pre>common.runner.getLock SomeLock &quot;$CXR_LEVEL_GLOBAL&quot;</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>the name of the lock to get</td></tr><tr><td class=CDLEntry>$2</td><td class=CDLDescription>the level of the lock, either of &ldquo;$CXR_LEVEL_INSTANCE&rdquo;, &ldquo;$CXR_LEVEL_GLOBAL&rdquo; or &ldquo;$CXR_LEVEL_UNIVERSAL&rdquo;</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.releaseLock"></a>common.<wbr>runner.<wbr>releaseLock</h3><div class=CBody><p>Releases a lock by deleting both link and target file.</p><h4 class=CHeading>Recommended call</h4><blockquote><pre>common.runner.releaseLock lockname</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>the name of the lock to release</td></tr><tr><td class=CDLEntry>$2</td><td class=CDLDescription>the level of the lock, either of &ldquo;$CXR_LEVEL_INSTANCE&rdquo;, &ldquo;$CXR_LEVEL_GLOBAL&rdquo; or &ldquo;$CXR_LEVEL_UNIVERSAL&rdquo;</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.getExistingConfigFile"></a>common.<wbr>runner.<wbr>getExistingConfigFile</h3><div class=CBody><p>Interactively asks user for the name of an existing config file (no path)</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.createConfigFile"></a>common.<wbr>runner.<wbr>createConfigFile</h3><div class=CBody><p>Interactively creates a new configuration file for a run.</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Can derive a new file from any given config file</td><td class=CDLDescription>also takes care of expansion.&nbsp; Also can create a new file using an .ask file, similar to the installer of CAMxRunner</td></tr></table><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>Run-name</td></tr><tr><td class=CDLEntry>[$2]</td><td class=CDLDescription>An existing run name to be used (if given, we ask no questions)</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.expandConfigFile"></a>common.<wbr>runner.<wbr>expandConfigFile</h3><div class=CBody><p>Replaces and non-single quoted variable in a config file by its value.&nbsp; This allows to preserve a config file (it is then independent of base.conf).&nbsp; Interactive function.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>File to expand</td></tr><tr><td class=CDLEntry>$2</td><td class=CDLDescription>resulting output file</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.getModelId"></a>common.<wbr>runner.<wbr>getModelId</h3><div class=CBody><p>Each model has a 0-based id (used for example to index CXR_SUPPORTED_MODEL_VERSIONS)</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>Exact name of model to use</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.getNewRunName"></a>common.<wbr>runner.<wbr>getNewRunName</h3><div class=CBody><p>Interactively asks user for new run name</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.createNewRun"></a>common.<wbr>runner.<wbr>createNewRun</h3><div class=CBody><p>Creates a new run by creating an appropriate link and calling <a href="#common.runner.createConfigFile" class=LFunction id=link11 onMouseOver="ShowTip(event, 'tt3', 'link11')" onMouseOut="HideTip('tt3')">common.runner.createConfigFile</a></p><p>Tolerates runs that already exist (asks user).</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.createMissingDirs"></a>common.<wbr>runner.<wbr>createMissingDirs</h3><div class=CBody><p>Interactive function if called as such</p><p>Reads the configuration of a run and creates all directories that are visible.&nbsp; This function is not intended to be called during a run, just for preparation.&nbsp; It is also no substitute for the checks, because of rules (see below) Has a couple of drawbacks:</p><ul><li>it cannot forsee any rules that alter directories or add subdirectories</li><li>the configuration must be up-to-date we pause to give user the chance to update it.</li></ul><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>Run-name for which to create directories</td></tr><tr><td class=CDLEntry>$2</td><td class=CDLDescription>iteractive (boolean), if set and true, run interactively (IS THIS GOOD??)</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.getConfigItem"></a>common.<wbr>runner.<wbr>getConfigItem</h3><div class=CBody><p>This function loads a runs configuration (full hierarchy) and then extracts the value of a given variable.&nbsp; If the variable is not found, we crash.&nbsp; Its recommended to call this function in a subshell (see below), otherwise, the current configuration is overwritten.</p><h4 class=CHeading>Example</h4><blockquote><pre>oldEmissDir=&quot;$(common.runner.getConfigItem CXR_EMISSION_DIR $oldRun)&quot;</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>item name (a variable name)</td></tr><tr><td class=CDLEntry>$2</td><td class=CDLDescription>Run-name</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.recreateInput"></a>common.<wbr>runner.<wbr>recreateInput</h3><div class=CBody><p>Interactive function</p><p>Asks the user which parts of an existing runs input data must by copied, moved or linked to a new run.&nbsp; TODO: Rewrite using a loop</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$1</td><td class=CDLDescription>New Run-name</td></tr><tr><td class=CDLEntry>$2</td><td class=CDLDescription>Existing Run-name</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="common.runner.recreateRun"></a>common.<wbr>runner.<wbr>recreateRun</h3><div class=CBody><p>Creates a copy of an existing config file and prepares everything to rerun.&nbsp; Depending on the users choice, Input data can be linked or copied.&nbsp; Automatically creates the needed directories.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>[$1]</td><td class=CDLDescription>Run-name to re-create (optional)</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="test_module"></a>test_module</h3><div class=CBody><p>Runs the predefined tests for this module.&nbsp; If you add or remove tests, please update CXR_META_MODULE_NUM_TESTS in the header!</p></div></div></div>

</div><!--Content-->


<div id=Footer>Copyright &copy; Daniel C. Oderbolz&nbsp; &middot;&nbsp; Updated April 26th, 2011&nbsp; &middot;&nbsp; <a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MTitle>CAMxRunner<div class=MSubTitle>Code documentation</div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent31')">Modules</a><div class=MGroupContent id=MGroupContent31><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Common</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MFile><a href="array_functions-sh.html">array_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="CAMx/camx_model_functions-sh.html">CAMx/<wbr>camx_model_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="check_functions-sh.html">check_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="conf_functions-sh.html">conf_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="date_functions-sh.html">date_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="db_functions-sh.html">db_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="external_functions-sh.html">external_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="fs_functions-sh.html">fs_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="hash_functions-sh.html">hash_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="installer_functions-sh.html">installer_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="map_functions-sh.html">map_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="math_functions-sh.html">math_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="module_functions-sh.html">module_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="performance_functions-sh.html">performance_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="PMCAMx/pmcamx_model_functions-sh.html">PMCAMx/<wbr>pmcamx_model_functions.sh</a></div></div><div class=MEntry><div class=MFile id=MSelected>runner_functions.sh</div></div><div class=MEntry><div class=MFile><a href="state_functions-sh.html">state_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="string_functions-sh.html">string_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="task_functions-sh.html">task_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="test_functions-sh.html">test_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="user_functions-sh.html">user_functions.sh</a></div></div><div class=MEntry><div class=MFile><a href="variable_functions-sh.html">variable_functions.sh</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent8')">Installer</a><div class=MGroupContent id=MGroupContent8><div class=MEntry><div class=MFile><a href="../installer/10_CAMxRunner_installer-sh.html">10_CAMxRunner_installer.sh</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent5')">CAMx</a><div class=MGroupContent id=MGroupContent5><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent2')">4.42</a><div class=MGroupContent id=MGroupContent2><div class=MEntry><div class=MFile><a href="../installer/CAMx/4-42/11_Converter_installer-sh.html">11_Converter_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/4-42/20_HDF_installer-sh.html">20_HDF_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/4-42/21_CAMx_installer-sh.html">21_CAMx_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/4-42/22_Pre_and_Postprocessor_installer-sh.html">22_Pre_and_Postprocessor_installer.sh</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent3')">4.51</a><div class=MGroupContent id=MGroupContent3><div class=MEntry><div class=MFile><a href="../installer/CAMx/4-51/11_Converter_installer-sh.html">11_Converter_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/4-51/20_HDF_installer-sh.html">20_HDF_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/4-51/21_CAMx_installer-sh.html">21_CAMx_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/4-51/22_Pre_and_Postprocessor_installer-sh.html">22_Pre_and_Postprocessor_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/4-51/30_testcase_installer-sh.html">30_testcase_installer.sh</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent4')">5.10</a><div class=MGroupContent id=MGroupContent4><div class=MEntry><div class=MFile><a href="../installer/CAMx/5-10/11_Converter_installer-sh.html">11_Converter_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/5-10/20_HDF_installer-sh.html">20_HDF_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/5-10/21_CAMx_installer-sh.html">21_CAMx_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/5-10/22_Pre_and_Postprocessor_installer-sh.html">22_Pre_and_Postprocessor_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/5-10/30_testcase_installer-sh.html">30_testcase_installer.sh</a></div></div></div></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent7')">CAMx</a><div class=MGroupContent id=MGroupContent7><div class=MEntry><div class=MFile><a href="../installer/CAMx/5-30/11_Converter_installer-sh.html">11_Converter_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/5-30/20_HDF_installer-sh.html">20_HDF_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/5-30/21_CAMx_installer-sh.html">21_CAMx_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/5-30/22_Pre_and_Postprocessor_installer-sh.html">22_Pre_and_Postprocessor_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/5-30/30_testcase_installer-sh.html">30_testcase_installer.sh</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent6')">5.20.1</a><div class=MGroupContent id=MGroupContent6><div class=MEntry><div class=MFile><a href="../installer/CAMx/5-20-1/11_Converter_installer-sh.html">11_Converter_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/5-20-1/20_HDF_installer-sh.html">20_HDF_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/5-20-1/21_CAMx_installer-sh.html">21_CAMx_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/5-20-1/22_Pre_and_Postprocessor_installer-sh.html">22_Pre_and_Postprocessor_installer.sh</a></div></div><div class=MEntry><div class=MFile><a href="../installer/CAMx/5-20-1/30_testcase_installer-sh.html">30_testcase_installer.sh</a></div></div></div></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../installer/PMCAMx/2008/10_PMCAMx_installer-sh.html">PMCAMx/<wbr>2008/<wbr>10_PMCAMx_installer.sh</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent9')">Model</a><div class=MGroupContent id=MGroupContent9><div class=MEntry><div class=MFile><a href="../model/CAMx/4-42/model-sh.html">CAMx/<wbr>4.42/<wbr>model.sh</a></div></div><div class=MEntry><div class=MFile><a href="../model/CAMx/4-51/model-sh.html">CAMx/<wbr>4.51/<wbr>model.sh</a></div></div><div class=MEntry><div class=MFile><a href="../model/PMCAMx/2008/model-sh.html">PMCAMx/<wbr>2008/<wbr>model.sh</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent19')">Postproc</a><div class=MGroupContent id=MGroupContent19><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent12')">4.42</a><div class=MGroupContent id=MGroupContent12><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-42/once/concatenate_station_data-sh.html">concatenate_station_data.sh</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent11')">Daily</a><div class=MGroupContent id=MGroupContent11><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-42/daily/avgdif-sh.html">avgdif.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-42/daily/convert_output-sh.html">convert_output.sh</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent10')">Extract_station_data</a><div class=MGroupContent id=MGroupContent10><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-42/daily/extract_station_data/extract_arpa_stations-pro.html">extract_arpa_stations</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-42/daily/extract_station_data/extract_nabel_stations-pro.html">extract_nabel_stations</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-42/daily/extract_station_data-bin-sh.html">extract_station_data.<wbr>bin.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-42/daily/extract_station_data-sh.html">extract_station_data.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-42/daily/run_aqmfad-sh.html">run_aqmfad.sh</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-42/once/extract_pa_data-sh.html">extract_pa_data.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-42/once/set_permissions-sh.html">set_permissions.sh</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent15')">4.51</a><div class=MGroupContent id=MGroupContent15><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-51/once/concatenate_station_data-sh.html">concatenate_station_data.sh</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent14')">Daily</a><div class=MGroupContent id=MGroupContent14><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-51/daily/avgdif-sh.html">avgdif.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-51/daily/convert_output-sh.html">convert_output.sh</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent13')">Extract_station_data</a><div class=MGroupContent id=MGroupContent13><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-51/daily/extract_station_data/extract_arpa_stations-pro.html">extract_arpa_stations</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-51/daily/extract_station_data/extract_nabel_stations-pro.html">extract_nabel_stations</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-51/daily/extract_station_data-bin-sh.html">extract_station_data.<wbr>bin.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-51/daily/extract_station_data-sh.html">extract_station_data.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-51/daily/run_aqmfad-sh.html">run_aqmfad.sh</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-51/once/extract_pa_data-sh.html">extract_pa_data.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/4-51/once/set_permissions-sh.html">set_permissions.sh</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent18')">5.10</a><div class=MGroupContent id=MGroupContent18><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-10/once/concatenate_station_data-sh.html">concatenate_station_data.sh</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent17')">Daily</a><div class=MGroupContent id=MGroupContent17><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-10/daily/avgdif-sh.html">avgdif.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-10/daily/convert_output-sh.html">convert_output.sh</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent16')">Extract_station_data</a><div class=MGroupContent id=MGroupContent16><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-10/daily/extract_station_data/extract_arpa_stations-pro.html">extract_arpa_stations</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-10/daily/extract_station_data/extract_nabel_stations-pro.html">extract_nabel_stations</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-10/daily/extract_station_data-bin-sh.html">extract_station_data.<wbr>bin.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-10/daily/extract_station_data-sh.html">extract_station_data.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-10/daily/run_aqmfad-sh.html">run_aqmfad.sh</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-10/once/extract_pa_data-sh.html">extract_pa_data.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-10/once/set_permissions-sh.html">set_permissions.sh</a></div></div></div></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent30')">Preproc</a><div class=MGroupContent id=MGroupContent30><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent29')">CAMx</a><div class=MGroupContent id=MGroupContent29><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent22')">4.42</a><div class=MGroupContent id=MGroupContent22><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent20')">Daily</a><div class=MGroupContent id=MGroupContent20><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-42/daily/boundary_conditions-sh.html">boundary_conditions.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-42/daily/convert_emissions-sh.html">convert_emissions.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-42/daily/create_emissions-psi-sh.html">create_emissions.<wbr>psi.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-42/daily/run_emifad-sh.html">run_emifad.sh</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent21')">Once</a><div class=MGroupContent id=MGroupContent21><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-42/once/albedo_haze_ozone-sh.html">albedo_haze_ozone.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-42/once/check_input-sh.html">check_input.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-42/once/convert_landuse-sh.html">convert_landuse.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-42/once/convert_meteo-sh.html">convert_meteo.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-42/once/initial_conditions-sh.html">initial_conditions.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-42/once/photolysis_rates-sh.html">photolysis_rates.sh</a></div></div></div></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent25')">4.51</a><div class=MGroupContent id=MGroupContent25><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent23')">Daily</a><div class=MGroupContent id=MGroupContent23><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-51/daily/boundary_conditions-sh.html">boundary_conditions.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-51/daily/convert_emissions-sh.html">convert_emissions.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-51/daily/create_emissions-psi-sh.html">create_emissions.<wbr>psi.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-51/daily/run_emifad-sh.html">run_emifad.sh</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent24')">Once</a><div class=MGroupContent id=MGroupContent24><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-51/once/albedo_haze_ozone-sh.html">albedo_haze_ozone.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-51/once/check_input-sh.html">check_input.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-51/once/convert_landuse-sh.html">convert_landuse.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-51/once/convert_meteo-sh.html">convert_meteo.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-51/once/initial_conditions-sh.html">initial_conditions.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/4-51/once/photolysis_rates-sh.html">photolysis_rates.sh</a></div></div></div></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent28')">5.10</a><div class=MGroupContent id=MGroupContent28><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent26')">Daily</a><div class=MGroupContent id=MGroupContent26><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-10/daily/boundary_conditions-sh.html">boundary_conditions.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-10/daily/convert_emissions-sh.html">convert_emissions.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-10/daily/create_emissions-psi-sh.html">create_emissions.<wbr>psi.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-10/daily/run_emifad-sh.html">run_emifad.sh</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent27')">Once</a><div class=MGroupContent id=MGroupContent27><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-10/once/albedo_haze_ozone-sh.html">albedo_haze_ozone.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-10/once/check_input-sh.html">check_input.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-10/once/convert_landuse-sh.html">convert_landuse.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-10/once/convert_meteo-sh.html">convert_meteo.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-10/once/initial_conditions-sh.html">initial_conditions.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-10/once/photolysis_rates-sh.html">photolysis_rates.sh</a></div></div></div></div></div></div></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../preproc/PMCAMx/2008/daily/split_emissions-sh.html">split_emissions.sh</a></div></div></div></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent32')">Inc</a><div class=MGroupContent id=MGroupContent32><div class=MEntry><div class=MFile><a href="../../inc/main_functions-inc.html">main_functions.inc</a></div></div><div class=MEntry><div class=MFile><a href="../../inc/defaults-inc.html">Parallel Task control</a></div></div><div class=MEntry><div class=MFile><a href="../../inc/tap-functions-inc.html">tap-functions.inc</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../../doc/Disclaimer-txt.html">Disclaimer</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent40')">Modules</a><div class=MGroupContent id=MGroupContent40><div class=MEntry><div class=MFile><a href="../model/CAMx/5-10/model-sh.html">5.<wbr>10/<wbr>model.sh</a></div></div><div class=MEntry><div class=MFile><a href="../model/CAMx/5-20-1/model-sh.html">5.<wbr>20.<wbr>1/model.sh</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent36')">Postproc</a><div class=MGroupContent id=MGroupContent36><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent34')">Daily</a><div class=MGroupContent id=MGroupContent34><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-20-1/daily/avgdif-sh.html">avgdif.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-20-1/daily/convert_output-sh.html">convert_output.sh</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent33')">Extract_station_data</a><div class=MGroupContent id=MGroupContent33><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-20-1/daily/extract_station_data/extract_arpa_stations-pro.html">extract_arpa_stations</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-20-1/daily/extract_station_data/extract_nabel_stations-pro.html">extract_nabel_stations</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-20-1/daily/extract_station_data-bin-sh.html">extract_station_data.<wbr>bin.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-20-1/daily/extract_station_data-sh.html">extract_station_data.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-20-1/daily/run_aqmfad-sh.html">run_aqmfad.sh</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent35')">Once</a><div class=MGroupContent id=MGroupContent35><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-20-1/once/concatenate_station_data-sh.html">concatenate_station_data.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-20-1/once/extract_pa_data-sh.html">extract_pa_data.sh</a></div></div><div class=MEntry><div class=MFile><a href="../postproc/CAMx/5-20-1/once/set_permissions-sh.html">set_permissions.sh</a></div></div></div></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent39')">Preproc</a><div class=MGroupContent id=MGroupContent39><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent37')">Daily</a><div class=MGroupContent id=MGroupContent37><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-20-1/daily/boundary_conditions-sh.html">boundary_conditions.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-20-1/daily/convert_emissions-sh.html">convert_emissions.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-20-1/daily/create_emissions-psi-sh.html">create_emissions.<wbr>psi.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-20-1/daily/run_emifad-sh.html">run_emifad.sh</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent38')">Once</a><div class=MGroupContent id=MGroupContent38><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-20-1/once/albedo_haze_ozone-sh.html">albedo_haze_ozone.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-20-1/once/check_input-sh.html">check_input.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-20-1/once/convert_landuse-sh.html">convert_landuse.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-20-1/once/convert_meteo-sh.html">convert_meteo.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-20-1/once/initial_conditions-sh.html">initial_conditions.sh</a></div></div><div class=MEntry><div class=MFile><a href="../preproc/CAMx/5-20-1/once/photolysis_rates-sh.html">photolysis_rates.sh</a></div></div></div></div></div></div></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent41')">Index</a><div class=MGroupContent id=MGroupContent41><div class=MEntry><div class=MIndex><a href="../../../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/Files.html">Files</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/Functions.html">Functions</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/Variables.html">Variables</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../../../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Files">Files</option><option value="Functions">Functions</option><option value="Variables">Variables</option></select></div><script language=JavaScript><!--
HideAllBut([1, 31], 42);// --></script></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction>Gives a rough (hopefully over-)estimate  on the number of megabytes needed for the output.</div></div><div class=CToolTip id="tt2"><div class=CFunction>Returns the name of a temporary file with random name, shows a message and adds the file to the temp file list if this is needed. </div></div><div class=CToolTip id="tt3"><div class=CFunction>Interactively creates a new configuration file for a run.</div></div><div class=CToolTip id="tt4"><div class=CFunction>A special variety of common.runner.createTempFile that sould be used whenever a jobfile for an application (such as AHOMAP) is needed. </div></div><div class=CToolTip id="tt5"><div class=CFunction>Removes all files from the temp file list if CXR_REMOVE_TEMP_FILES is true. </div></div><div class=CToolTip id="tt6"><div class=CFunction>Returns the name of a temporary directory with random name, shows a message and adds the file to the temp file list if this is needed.</div></div><!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>